{"id":"6C2W1azD1rBsV4qJANNfruBrvGgdqLWrPGWtk6Mp1WgfCNcfvBZHFQw","title":"System Design Newsletter","displayTitle":"Dev - System Design Newsletter","url":"https://newsletter.systemdesign.one/feed","feedLink":"https://newsletter.systemdesign.one/","items":[{"title":"How Google Ads Was Able to Support 4.77 Billion Users With a SQL Database ðŸ”¥","url":"https://newsletter.systemdesign.one/p/cloud-spanner-database","date":1731159005,"author":"Neo Kim","unread":true,"desc":"","content":"<p>Get the powerful template to approach system design for FREE on newsletter sign-up:</p><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/subscribe?&quot;,&quot;text&quot;:&quot;Subscribe now&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/subscribe?\"><span>Subscribe now</span></a></p><div><hr></div><p><em>This post outlines Google Spanner architecture. You will find references at the bottom of this page if you want to go deeper.</em></p><ul><li><p><em><a href=\"https://newsletter.systemdesign.one/p/cloud-spanner-database/?action=share\">Share this post</a> &amp; I'll send you some rewards for the referrals.</em></p></li></ul><p><em>Note: This post is based on my research and may differ from real-world implementation.</em></p><p>Once upon a time, 2 students decided to sell their university project for a million dollars.</p><p>Yet they failed to make the sale.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif\" width=\"536\" height=\"281.4\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:630,&quot;width&quot;:1200,&quot;resizeWidth&quot;:536,&quot;bytes&quot;:386635,&quot;alt&quot;:&quot;cloud spanner database&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/gif&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"cloud spanner database\" title=\"cloud spanner database\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60c8ad86-b4d8-4bbd-8246-23a4ffd99e8a_1200x630.gif 1456w\" sizes=\"100vw\" fetchpriority=\"high\"></picture><div class=\"image-link-expand\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></a></figure></div><p>So they decided to develop it further and named it Google.</p><p>The main source of their income was from advertisement slots (<strong>Ads</strong>).</p><p>And their growth rate was explosive.</p><p>Yet they stored Ads data in MySQL for simplicity and reliability.</p><p>As more users joined, they partitioned MySQL for scale.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png\" width=\"348\" height=\"269.18466898954705\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:666,&quot;width&quot;:861,&quot;resizeWidth&quot;:348,&quot;bytes&quot;:55067,&quot;alt&quot;:&quot;Key-Range Partitioning of Mysql to Scale&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Key-Range Partitioning of Mysql to Scale\" title=\"Key-Range Partitioning of Mysql to Scale\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3edbe088-2805-4eb4-96f7-ac3003638d90_861x666.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></a><figcaption class=\"image-caption\">Key-Range Partitioning of MySQL to Scale</figcaption></figure></div><p>Although partitioning temporarily solved their scalability issues, there were newer problems.</p><p>Here are some of them:</p><h4>1. Scalability</h4><p>Their storage needs skyrocketed with growth.</p><p>And re-partitioning MySQL takes time as data must be moved between servers.</p><p>Yet they had extremely minimal downtime requirements.</p><p>So it became hard.</p><h4>2. Transactions</h4><p>They need <a href=\"https://mariadb.com/resources/blog/acid-compliance-what-it-means-and-why-you-should-care/\">ACID</a> compliance for Ads data.</p><p>But transactions became difficult after partitioning.</p><p>Think of a <strong>transaction</strong> as a series of writes and reads.</p><div><hr></div><h3><a href=\"https://www.hellointerview.com/practice?utm_source=newsletter&amp;utm_campaign=neo1\">System Design Guided Practice - Sponsor</a></h3><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://www.hellointerview.com/practice?utm_source=newsletter&amp;utm_campaign=neo1\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif\" width=\"606\" height=\"340.875\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:270,&quot;width&quot;:480,&quot;resizeWidth&quot;:606,&quot;bytes&quot;:966142,&quot;alt&quot;:&quot;Hello Interview&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/gif&quot;,&quot;href&quot;:&quot;https://www.hellointerview.com/practice?utm_source=newsletter&amp;utm_campaign=neo1&quot;,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Hello Interview\" title=\"Hello Interview\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09918175-19a8-4ab9-8bac-293b4a6c1b1a_480x270.gif 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a></figure></div><p>Preparing for system design interviews? Work through common questions with personalized feedback to help you improve and own your next interview. Start practicing with&nbsp;<a href=\"https://www.hellointerview.com/practice?utm_source=newsletter&amp;utm_campaign=neo1\">System Design Guided Practice</a> by Hello Interview today.</p><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://www.hellointerview.com/practice?utm_source=newsletter&amp;utm_campaign=neo1&quot;,&quot;text&quot;:&quot;Try Now&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://www.hellointerview.com/practice?utm_source=newsletter&amp;utm_campaign=neo1\"><span>Try Now</span></a></p><div><hr></div><h2>Cloud Spanner Database</h2><p>They need massive scalability of NoSQL.</p><p>And ACID properties of MySQL.</p><p>So they created Spanner - <em>a distributed SQL database</em>.</p><p>Here&#8217;s how:</p><h3>1. Atomicity</h3><p>Atomicity means a transaction is all or nothing. Put simply, a transaction must update data in different partitions at once.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png\" width=\"690\" height=\"375.3296703296703\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:792,&quot;width&quot;:1456,&quot;resizeWidth&quot;:690,&quot;bytes&quot;:118397,&quot;alt&quot;:&quot;Two-Phase Commit for Atomic Transactions&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Two-Phase Commit for Atomic Transactions\" title=\"Two-Phase Commit for Atomic Transactions\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f72e18a-6458-4617-8d51-ed74e1c25790_1480x805.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></a><figcaption class=\"image-caption\">Two-Phase Commit for Atomic Transactions</figcaption></figure></div><p>Yet it&#8217;s difficult to ensure every partition will commit.</p><p>So they use the two-phase commit (<strong><a href=\"https://en.wikipedia.org/wiki/Two-phase_commit_protocol\">2PC</a></strong>) protocol.</p><p>Here&#8217;s how it works:</p><ul><li><p>Prepare phase: coordinator asks relevant partitions if they&#8217;re ready to commit</p></li><li><p>Commit phase: coordinator tells relevant partitions to commit if everyone agreed</p></li></ul><p>The transaction gets aborted if any partition isn't ready. Thus achieving atomicity.</p><p>Ready for the best part?</p><h3>2. Consistency</h3><p>They provide <em>strong</em> <em>consistency</em> at a global level.</p><p>This means if data gets updated in Europe, the same data would be shown in Asia. Put simply, a read will always return the latest write.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png\" width=\"556\" height=\"284.6027846027846\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:625,&quot;width&quot;:1221,&quot;resizeWidth&quot;:556,&quot;bytes&quot;:79102,&quot;alt&quot;:&quot;Deploying Partitions Across Zones&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Deploying Partitions Across Zones\" title=\"Deploying Partitions Across Zones\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7acbebd5-1d2e-45f0-b556-3ae6e412dffb_1221x625.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></a><figcaption class=\"image-caption\">Deploying Partitions Across Zones</figcaption></figure></div><p>A database partition gets replicated across different zones for scalability. Think of a <strong>zone</strong> as a geographical location.</p><p>Yet it&#8217;s important to coordinate writes among replicas to avoid data conflicts.</p><p>So they use the <a href=\"https://www.scylladb.com/glossary/paxos-consensus-algorithm/\">Paxos algorithm</a> to find a partition leader. A partition <strong>leader</strong> is responsible for managing writes, while followers handle reads. Also different partition leaders might get deployed in separate zones.</p><p>Imagine <strong>Paxos</strong> as a technique to ensure consensus across distributed systems.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png\" width=\"510\" height=\"176.6607301869991\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/0f55728d-f593-45af-91af-ae338ad32165_1123x389.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:389,&quot;width&quot;:1123,&quot;resizeWidth&quot;:510,&quot;bytes&quot;:43664,&quot;alt&quot;:&quot;TrueTime Architecture&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"TrueTime Architecture\" title=\"TrueTime Architecture\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0f55728d-f593-45af-91af-ae338ad32165_1123x389.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">TrueTime Architecture</figcaption></figure></div><p>A simple way to achieve strong consistency is by ordering writes with timestamps. It allows a consistent view of data across servers.</p><p>Yet it&#8217;s difficult to maintain the same time across every server in the world.</p><p>So they use <a href=\"https://cloud.google.com/spanner/docs/true-time-external-consistency\">TrueTime</a>. Think of <strong>TrueTime</strong> as a combination of <a href=\"https://timetoolsltd.com/gps/what-is-the-gps-clock/\">GPS receivers</a> and <a href=\"https://en.wikipedia.org/wiki/Atomic_clock\">atomic clocks</a>. It finds the current time in each data center with high accuracy.</p><p>And each server synchronizes its quartz clock with TrueTime every 30 seconds.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png\" width=\"712\" height=\"267.97802197802196\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:548,&quot;width&quot;:1456,&quot;resizeWidth&quot;:712,&quot;bytes&quot;:75117,&quot;alt&quot;:&quot;Comparing Timestamps for Strong Consistency During Reads&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Comparing Timestamps for Strong Consistency During Reads\" title=\"Comparing Timestamps for Strong Consistency During Reads\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8456adfa-86c1-46ce-90f4-cd1315667737_1589x598.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></a><figcaption class=\"image-caption\">Comparing Timestamps for Strong Consistency During Reads</figcaption></figure></div><p>Here&#8217;s how they perform reads:</p><ol><li><p>The request gets routed to the nearest zone even if it has a follower</p></li><li><p>The follower asks the leader for the latest timestamp of the requested data</p></li><li><p>The follower compares the leader&#8217;s response with its timestamp</p></li><li><p>The follower responds to the client</p></li></ol><p>Also the follower will wait for the leader to synchronize in case its data is outdated.</p><p>Ready for the next technique?</p><h3>3. Isolation</h3><p>Isolation means transactions don&#8217;t interfere with each other.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png\" width=\"316\" height=\"250.65432098765433\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:514,&quot;width&quot;:648,&quot;resizeWidth&quot;:316,&quot;bytes&quot;:58934,&quot;alt&quot;:&quot;Two-Phase Locking for Data Isolation During Writes&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Two-Phase Locking for Data Isolation During Writes\" title=\"Two-Phase Locking for Data Isolation During Writes\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F72265bbc-9de3-4d3c-9f75-53e528ea311c_648x514.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></a><figcaption class=\"image-caption\">Two-Phase Locking for Data Isolation During Writes</figcaption></figure></div><p>Yet it&#8217;s difficult to avoid data conflicts due to concurrent transactions.</p><p>So they use two-phase locking (<strong><a href=\"https://en.wikipedia.org/wiki/Two-phase_locking\">2PL</a></strong>) for data isolation during writes.</p><p>Here&#8217;s how it works:</p><ul><li><p>Growing phase: transaction performs reads or writes once it acquires locks on data</p></li><li><p>Shrinking phase: transaction releases locks one at a time after it&#8217;s complete</p></li></ul><p>Thus avoiding data conflicts on writes.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png\" width=\"290\" height=\"196.6876971608833\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:430,&quot;width&quot;:634,&quot;resizeWidth&quot;:290,&quot;bytes&quot;:36362,&quot;alt&quot;:&quot;Snapshot Isolation During Reads&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Snapshot Isolation During Reads\" title=\"Snapshot Isolation During Reads\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa83f150c-6324-462a-969a-fe8d6cc324e7_634x430.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Snapshot Isolation During Reads</figcaption></figure></div><p>Besides they use snapshot isolation.</p><p>It&#8217;s a multi-version concurrency control (<strong><a href=\"https://en.wikipedia.org/wiki/Multiversion_concurrency_control\">MVCC</a></strong>) technique for <em>lock-free reads</em>. Think of <strong>snapshot</strong> <strong>isolation</strong> as a way to look at the database from a point in time.</p><p>It returns a specific version of data during reads and doesn't affect ongoing writes. Thus providing data isolation.</p><p>Here&#8217;s how it works:</p><ul><li><p>The previous data isn&#8217;t overwritten</p></li><li><p>Instead a new value gets written along with a TrueTime timestamp</p></li></ul><p>Also older versions get automatically removed after a specific period to save storage.</p><p>Onward.</p><h3>4. Durability</h3><p>Durability means the result of a completed transaction never gets lost.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png\" width=\"1456\" height=\"556\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:556,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:85366,&quot;alt&quot;:&quot;Synchronous Writes Using Paxos for Durability&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Synchronous Writes Using Paxos for Durability\" title=\"Synchronous Writes Using Paxos for Durability\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1aacd1a4-527b-492c-90af-aac433349d2a_1565x598.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></a><figcaption class=\"image-caption\">Synchronous Writes Using Paxos for Durability</figcaption></figure></div><p>They perform <em>synchronous</em> <em>writes</em> using Paxos. It gives durability as data is written to a majority of followers.</p><p>While data is then replicated to other followers based on the leader-follower replication technique.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png\" width=\"482\" height=\"144.55351976856315\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:311,&quot;width&quot;:1037,&quot;resizeWidth&quot;:482,&quot;bytes&quot;:34896,&quot;alt&quot;:&quot;High-Level Architecture of the Database Server&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"High-Level Architecture of the Database Server\" title=\"High-Level Architecture of the Database Server\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8cbdcdea-0336-4fa2-9af2-293ec9274e00_1037x311.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">High-Level Architecture of the Database Server</figcaption></figure></div><p>Besides they separate the compute and storage layers in the database server. </p><p>The compute layer handles reads and writes. While <a href=\"https://cloud.google.com/blog/products/storage-data-transfer/a-peek-behind-colossus-googles-file-system\">Google Colossus</a> is used as the storage layer. Think of <strong>Colossus</strong> as a distributed file system for high performance and durability.</p><div><hr></div><div class=\"instagram\" data-attrs=\"{&quot;instagram_id&quot;:&quot;DCJlq7etA5I&quot;,&quot;title&quot;:&quot;A post shared by @systemdesignone&quot;,&quot;author_name&quot;:&quot;systemdesignone&quot;,&quot;thumbnail_url&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/__ss-rehost__IG-meta-DCJlq7etA5I.jpg&quot;,&quot;timestamp&quot;:null,&quot;belowTheFold&quot;:true}\" data-component-name=\"InstagramToDOM\"><div class=\"instagram-top-bar\"><a class=\"instagram-author-name\" href=\"https://instagram.com/systemdesignone\" target=\"_blank\">systemdesignone</a></div><a class=\"instagram-image\" href=\"https://instagram.com/p/DCJlq7etA5I\" target=\"_blank\"><img src=\"https://substackcdn.com/image/fetch/w_640,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F__ss-rehost__IG-meta-DCJlq7etA5I.jpg\" loading=\"lazy\"></a><div class=\"instagram-bottom-bar\"><div class=\"instagram-title\">A post shared by <a href=\"https://instagram.com/systemdesignone\" target=\"_blank\">@systemdesignone</a></div></div></div><p>Spanner offers 99.999% availability.</p><p>While Google generated a whopping 237 billion dollars from Ads in 2023.</p><p>And became one of the most valuable companies in the world.</p><div><hr></div><p>&#128075; PS - Are you unhappy at your current job?</p><p>While preparing for system design interviews to get your dream job can be stressful.</p><p>Don't worry, I'm working on content to help you pass the system design interview. I'll make it easier - you spend only a few minutes each week to go from 0 to 1. Yet paid subscription fees will be higher than current pledge fees.</p><p>So pledge now to get access at a lower price.</p><p><em>&#8220;An excellent newsletter to learn system design through practical case studies.&#8221; </em>Franco</p><div><hr></div><p>Subscribe to get simplified case studies delivered straight to your inbox:</p><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/subscribe?&quot;,&quot;text&quot;:&quot;Subscribe now&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/subscribe?\"><span>Subscribe now</span></a></p><div><hr></div><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png\" width=\"152\" height=\"152\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:320,&quot;width&quot;:320,&quot;resizeWidth&quot;:152,&quot;bytes&quot;:74009,&quot;alt&quot;:&quot;Author Neo Kim; System design case studies&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Author Neo Kim; System design case studies\" title=\"Author Neo Kim; System design case studies\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\"><strong>Follow me on <a href=\"https://www.linkedin.com/in/nk-systemdesign-one/\">LinkedIn</a> | <a href=\"https://www.threads.net/@systemdesignone\">Threads</a> | <a href=\"https://x.com/systemdesign42\">Twitter</a> | <a href=\"https://www.instagram.com/systemdesignone/\">Instagram</a></strong></figcaption></figure></div><div><hr></div><p>Thank you for supporting this newsletter. Consider sharing this post with your friends and get rewards. Y&#8217;all are the best.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png\" width=\"608\" height=\"380\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:500,&quot;width&quot;:800,&quot;resizeWidth&quot;:608,&quot;bytes&quot;:78656,&quot;alt&quot;:&quot;system design newsletter&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"system design newsletter\" title=\"system design newsletter\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></a></figure></div><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/p/cloud-spanner-database?utm_source=substack&utm_medium=email&utm_content=share&action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/p/cloud-spanner-database?utm_source=substack&utm_medium=email&utm_content=share&action=share\"><span>Share</span></a></p><div><hr></div><div class=\"digest-post-embed\" data-attrs=\"{&quot;nodeId&quot;:&quot;41bfb7de-e09a-4d52-9948-efcf65baaa08&quot;,&quot;caption&quot;:&quot;Get the powerful template to approach system design for FREE on newsletter sign-up:&quot;,&quot;size&quot;:&quot;sm&quot;,&quot;isEditorNode&quot;:true,&quot;title&quot;:&quot;How Amazon S3 Works &#10024;&quot;,&quot;publishedBylines&quot;:[{&quot;id&quot;:135589200,&quot;name&quot;:&quot;Neo Kim&quot;,&quot;bio&quot;:&quot;Writes System Design Newsletter &#8226; I Teach You System Design&quot;,&quot;photo_url&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/c103940f-0d8b-47e7-9a33-013202e17bb8_389x389.jpeg&quot;,&quot;is_guest&quot;:false,&quot;bestseller_tier&quot;:null}],&quot;post_date&quot;:&quot;2024-10-25T12:28:30.262Z&quot;,&quot;cover_image&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a8ac2dd2-9f0b-4c6b-8c88-8ae6197b5647_1280x720.gif&quot;,&quot;cover_image_alt&quot;:null,&quot;canonical_url&quot;:&quot;https://newsletter.systemdesign.one/p/s3-architecture&quot;,&quot;section_name&quot;:null,&quot;id&quot;:150109909,&quot;type&quot;:&quot;newsletter&quot;,&quot;reaction_count&quot;:154,&quot;comment_count&quot;:4,&quot;publication_name&quot;:&quot;System Design Newsletter&quot;,&quot;publication_logo_url&quot;:&quot;https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc2f21e38-5233-45c3-98b9-abd229da2423_256x256.png&quot;,&quot;belowTheFold&quot;:true}\"></div><div class=\"digest-post-embed\" data-attrs=\"{&quot;nodeId&quot;:&quot;e5556a79-3b3b-41ea-9bf5-7d796ec824c8&quot;,&quot;caption&quot;:&quot;Get the powerful template to approach system design for FREE on newsletter sign-up:&quot;,&quot;size&quot;:&quot;sm&quot;,&quot;isEditorNode&quot;:true,&quot;title&quot;:&quot;How Facebook Was Able to Support a Billion Users via Software Load Balancer &#9889;&quot;,&quot;publishedBylines&quot;:[{&quot;id&quot;:135589200,&quot;name&quot;:&quot;Neo Kim&quot;,&quot;bio&quot;:&quot;Writes System Design Newsletter &#8226; I Teach You System Design&quot;,&quot;photo_url&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/c103940f-0d8b-47e7-9a33-013202e17bb8_389x389.jpeg&quot;,&quot;is_guest&quot;:false,&quot;bestseller_tier&quot;:null}],&quot;post_date&quot;:&quot;2024-10-11T12:20:39.925Z&quot;,&quot;cover_image&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/3a1faaa2-99df-46a1-956d-1285a8abf9bf_1280x720.gif&quot;,&quot;cover_image_alt&quot;:null,&quot;canonical_url&quot;:&quot;https://newsletter.systemdesign.one/p/facebook-load-balancer&quot;,&quot;section_name&quot;:null,&quot;id&quot;:149723912,&quot;type&quot;:&quot;newsletter&quot;,&quot;reaction_count&quot;:102,&quot;comment_count&quot;:4,&quot;publication_name&quot;:&quot;System Design Newsletter&quot;,&quot;publication_logo_url&quot;:&quot;https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc2f21e38-5233-45c3-98b9-abd229da2423_256x256.png&quot;,&quot;belowTheFold&quot;:true}\"></div><div><hr></div><h3>References</h3><ul><li><p><a href=\"https://static.googleusercontent.com/media/research.google.com/en//archive/spanner-osdi2012.pdf\">Spanner: Google&#8217;s Globally Distributed Database White Paper</a></p></li><li><p><a href=\"https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/41344.pdf\">F1: A Distributed SQL Database That Scales</a></p></li><li><p><a href=\"https://www.usenix.org/conference/osdi12/technical-sessions/presentation/corbett\">Spanner: Google&#8217;s Globally Distributed Database Presentation</a></p></li><li><p><a href=\"https://research.google/pubs/spanner-truetime-and-the-cap-theorem/\">Spanner, TrueTime, and the CAP Theorem</a></p></li><li><p><a href=\"https://research.google/pubs/spanner-becoming-a-sql-system/\">Spanner: Becoming a SQL System</a></p></li><li><p><a href=\"https://cloud.google.com/blog/products/databases/strict-serializability-and-external-consistency-in-spanner\">Spanner under the hood: Understanding strict serializability and external consistency</a></p></li><li><p><a href=\"https://www.youtube.com/watch?v=IfsTINNCooY\">Cloud Spanner 101: Google's mission-critical relational database</a></p></li><li><p><a href=\"https://www.youtube.com/watch?v=oeycOVX70aE\">Distributed Systems: Google's Spanner</a></p></li><li><p><a href=\"https://www.youtube.com/watch?v=LaLT6EC7Trc\">Spanner - Google's Distributed Database by Sebastian Kanthak</a></p></li><li><p><a href=\"https://www.youtube.com/watch?v=-_rdWB9hN1c\">Distributed Systems: Two-phase commit</a></p></li><li><p><a href=\"https://www.oberlo.com/statistics/how-does-google-make-money\">How Does Google Make Money?</a></p></li><li><p>Block diagrams created with <a href=\"https://app.eraser.io/auth/sign-up?ref=neo\">Eraser</a></p></li></ul>","flags":null,"enclosureUrl":"https://substack-post-media.s3.amazonaws.com/public/images/c65080a9-b897-48b0-b638-f3951ae85ebb_1280x720.gif","enclosureMime":""},{"title":"How Databases Keep Passwords Securely ðŸ”’","url":"https://newsletter.systemdesign.one/p/how-to-store-passwords-in-database","date":1731935945,"author":"Neo Kim","unread":true,"desc":"","content":"<p>Get the powerful template to approach system design for FREE on newsletter sign-up:</p><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/subscribe?&quot;,&quot;text&quot;:&quot;Subscribe now&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/subscribe?\"><span>Subscribe now</span></a></p><div><hr></div><p><em>This post outlines how the database stores passwords securely. You will find references at the bottom of this page if you want to go deeper.</em></p><ul><li><p><em><a href=\"https://newsletter.systemdesign.one/p/how-to-store-passwords-in-database/?action=share\">Share this post</a> &amp; I'll send you some rewards for the referrals.</em></p></li></ul><p><em>Note: This post is based on my research and may differ from real-world implementation.</em></p><p>Once upon a time, there lived a junior software engineer.</p><p>He worked for a tech company named Hooli.</p><p>Although he was bright, he never got promoted.</p><p>So he was sad and frustrated.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif\" width=\"390\" height=\"204.75\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:630,&quot;width&quot;:1200,&quot;resizeWidth&quot;:390,&quot;bytes&quot;:185729,&quot;alt&quot;:&quot;How to Store Passwords in Database&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/gif&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"How to Store Passwords in Database\" title=\"How to Store Passwords in Database\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7db66c6-291a-4c0c-939c-a8c2ebe7581f_1200x630.gif 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a></figure></div><p>Until one day, he had the idea to apply for a new job.</p><p>And the interviewer asked him 1 simple question,</p><p><em>&#8220;How to securely store passwords in the database?&#8221;.</em></p><p>Yet he failed to answer and the interview was over in 5 minutes.</p><p>So he studied it later to fill the knowledge gap.</p><p>Onward.</p><div><hr></div><h3><a href=\"https://newsletter.systemdesign.one/p/sponsorship\">Reach 100,000+ Readers With an Ad in This Newsletter</a></h3><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://newsletter.systemdesign.one/p/sponsorship\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png\" width=\"106\" height=\"106\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/c8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:256,&quot;width&quot;:256,&quot;resizeWidth&quot;:106,&quot;bytes&quot;:20252,&quot;alt&quot;:&quot;system design newsletter&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:&quot;https://newsletter.systemdesign.one/p/sponsorship&quot;,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"system design newsletter\" title=\"system design newsletter\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc8e5001c-711d-4206-a4c5-d8dd4b197c4a_256x256.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a></figure></div><p>I'm opening ad slots in this newsletter, so I can scale + improve its quality. </p><p>Also I'll make it easier for you than running an ad campaign on social networks.</p><p>So if you want to reach a fresh audience in the tech community, you may want to sponsor this newsletter.</p><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/p/sponsorship&quot;,&quot;text&quot;:&quot;Sponsor this newsletter&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/p/sponsorship\"><span>Sponsor this newsletter</span></a></p><div><hr></div><h2>How to Store Passwords in Database</h2><p>He failed the interview so you don&#8217;t have to.</p><p>And here&#8217;s how you can answer it:</p><h3>1. Hashing</h3><p>A hacker can retrieve the passwords easily if they&#8217;re stored in plaintext form.</p><p>So they transform the password using a hash function.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png\" width=\"466\" height=\"75.21291208791209\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:235,&quot;width&quot;:1456,&quot;resizeWidth&quot;:466,&quot;bytes&quot;:61979,&quot;alt&quot;:&quot;Hash Function Transforming a Password&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Hash Function Transforming a Password\" title=\"Hash Function Transforming a Password\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c50a5d2-9afb-4287-bf01-bac1535dd5a5_1488x240.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Hash Function Transforming a Password</figcaption></figure></div><p>A hash function creates a unique string value from a password - <strong>fingerprint</strong>. Also the transformation is one-sided. Put simply, it&#8217;s impossible to find the password from a fingerprint.</p><p>A popular choice for the hash function is <a href=\"https://en.wikipedia.org/wiki/Bcrypt\">bcrypt</a> because: (1) it&#8217;s slow. (2) it needs a ton of computing power. (3) it needs a lot of memory. Thus making it difficult to run many password-cracking attempts for the hacker.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif\" width=\"330\" height=\"173.25\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:630,&quot;width&quot;:1200,&quot;resizeWidth&quot;:330,&quot;bytes&quot;:165249,&quot;alt&quot;:&quot;Hashing Explained With an Analogy&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/gif&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Hashing Explained With an Analogy\" title=\"Hashing Explained With an Analogy\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5b645997-d827-4b0f-8675-f69cca8e2634_1200x630.gif 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Hashing Explained With an Analogy</figcaption></figure></div><p>Think of the <strong><a href=\"https://en.wikipedia.org/wiki/Hash_function\">hash function</a></strong> as mixing colors - it&#8217;s difficult to find the original colors from the new color.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png\" width=\"500\" height=\"95.15996718621821\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:232,&quot;width&quot;:1219,&quot;resizeWidth&quot;:500,&quot;bytes&quot;:49468,&quot;alt&quot;:&quot;Workflow for Hashing a Password&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Workflow for Hashing a Password\" title=\"Workflow for Hashing a Password\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b999ea2-b1dd-4dec-81c5-25a24f7b5c85_1219x232.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Workflow for Hashing a Password</figcaption></figure></div><p>Here&#8217;s how it works:</p><ul><li><p>The server generates a fingerprint from the given password when the user creates an account.</p></li><li><p>The password isn&#8217;t stored in the database, instead the fingerprint is.</p></li><li><p>The fingerprint is regenerated whenever the user enters the password.</p></li></ul><p>The regenerated fingerprint gets compared against the value in the database. And the user is given access only if the values are equal.</p><p>Ready for the best part?</p><h3>2. Salting</h3><p>A hacker might crack the password from the fingerprint using a rainbow table.</p><p>So they add salt to the password.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png\" width=\"404\" height=\"212.1\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:630,&quot;width&quot;:1200,&quot;resizeWidth&quot;:404,&quot;bytes&quot;:103166,&quot;alt&quot;:&quot;Rainbow Table&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Rainbow Table\" title=\"Rainbow Table\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F205ed361-0b64-4daa-afc7-f3c33e7cfa7d_1200x630.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Rainbow Table</figcaption></figure></div><p>Think of the <strong><a href=\"https://en.wikipedia.org/wiki/Rainbow_table\">rainbow table</a></strong> as a map between <em>pre-computed</em> <em>fingerprints</em> and passwords.</p><p>While <strong><a href=\"https://en.wikipedia.org/wiki/Salt_(cryptography)\">salt</a></strong> is a random string.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png\" width=\"506\" height=\"81.66895604395604\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:235,&quot;width&quot;:1456,&quot;resizeWidth&quot;:506,&quot;bytes&quot;:72535,&quot;alt&quot;:&quot;Adding Salt to the Password to Create a Unique Fingerprint&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Adding Salt to the Password to Create a Unique Fingerprint\" title=\"Adding Salt to the Password to Create a Unique Fingerprint\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F946572a9-3a1c-4f99-afd0-28e38be4d346_1488x240.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Adding Salt to the Password to Create a Unique Fingerprint</figcaption></figure></div><p>And each user gets a unique salt, thus generating different fingerprints. Put simply, 2 users with the same password will have different fingerprints.</p><p>Also the rainbow table wouldn&#8217;t work after salting because of unique fingerprints. It invalidates the pre-computed values in the rainbow table.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png\" width=\"560\" height=\"103.36341263330598\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/d7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:225,&quot;width&quot;:1219,&quot;resizeWidth&quot;:560,&quot;bytes&quot;:50916,&quot;alt&quot;:&quot;Workflow for Salting a Password&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Workflow for Salting a Password\" title=\"Workflow for Salting a Password\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd7066cdb-dc5d-4bbc-9ac6-80a117e1c5dd_1219x225.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Workflow for Salting a Password</figcaption></figure></div><p>Here&#8217;s what happens when the user creates an account:</p><ul><li><p>The server creates a unique salt for the user.</p></li><li><p>The server combines the salt with the given password and hashes it.</p></li></ul><p>They store the salt alongside the fingerprint in the database.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png\" width=\"550\" height=\"128.13781788351108\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/e7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:284,&quot;width&quot;:1219,&quot;resizeWidth&quot;:550,&quot;bytes&quot;:64420,&quot;alt&quot;:&quot;Workflow for Validating the Password&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Workflow for Validating the Password\" title=\"Workflow for Validating the Password\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe7a37203-0ddf-41dd-a02e-f2a20e6176f9_1219x284.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Workflow for Validating the Password</figcaption></figure></div><p>Here&#8217;s what happens when the user enters a password:</p><ul><li><p>The server retrieves the salt for the specific user from the database.</p></li><li><p>The server combines the entered password with salt to generate a fingerprint.</p></li></ul><p>The server checks if the fingerprints are the same.</p><p>Ready for the next technique?</p><h3>3. Stretching</h3><p>The hacker might do a brute force attack to crack the password.</p><p>Imagine <strong>brute forcing</strong> as trying out all number combinations on a number lock.</p><p>So they do stretching.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png\" width=\"728\" height=\"82\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:164,&quot;width&quot;:1456,&quot;resizeWidth&quot;:728,&quot;bytes&quot;:132916,&quot;alt&quot;:&quot;How Key Stretching Works&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"How Key Stretching Works\" title=\"How Key Stretching Works\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F802a93a2-94c6-457a-87da-3a5383c8aa56_2744x310.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">How Key Stretching Works</figcaption></figure></div><p>Think of <strong><a href=\"https://en.wikipedia.org/wiki/Key_stretching\">stretching</a></strong> as applying the same hash function many times. Thus brute forcing becomes slower and more difficult.</p><div><hr></div><div class=\"instagram\" data-attrs=\"{&quot;instagram_id&quot;:&quot;DCgycKXt_WX&quot;,&quot;title&quot;:&quot;A post shared by @systemdesignone&quot;,&quot;author_name&quot;:&quot;systemdesignone&quot;,&quot;thumbnail_url&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/__ss-rehost__IG-meta-DCgycKXt_WX.jpg&quot;,&quot;timestamp&quot;:null,&quot;belowTheFold&quot;:true}\" data-component-name=\"InstagramToDOM\"><div class=\"instagram-top-bar\"><a class=\"instagram-author-name\" href=\"https://instagram.com/systemdesignone\" target=\"_blank\">systemdesignone</a></div><a class=\"instagram-image\" href=\"https://instagram.com/p/DCgycKXt_WX\" target=\"_blank\"><img src=\"https://substackcdn.com/image/fetch/w_640,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F__ss-rehost__IG-meta-DCgycKXt_WX.jpg\" loading=\"lazy\"></a><div class=\"instagram-bottom-bar\"><div class=\"instagram-title\">A post shared by <a href=\"https://instagram.com/systemdesignone\" target=\"_blank\">@systemdesignone</a></div></div></div><p>A randomly generated password is always more secure. (Also keep it over 12 characters.)</p><p>It&#8217;ll slow down the hacker, and make it difficult to crack the password.</p><div><hr></div><p>&#128075; PS - Are you unhappy at your current job?</p><p>And preparing for system design interviews to get your dream job can be stressful.</p><p>Don't worry, I'm working on content to help you pass the system design interview. I'll make it easier - you spend only a few minutes each week to go from 0 to 1. Yet paid subscription fees will be higher than current pledge fees.</p><p>So pledge now to get access at a lower price.</p><p><em>&#8220;An easy-to-understand view of complex real-world architectures.&#8221; </em>Fran</p><div><hr></div><p>Subscribe to get simplified case studies delivered straight to your inbox:</p><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/subscribe?&quot;,&quot;text&quot;:&quot;Subscribe now&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/subscribe?\"><span>Subscribe now</span></a></p><div><hr></div><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://www.threads.net/@systemdesignone\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png\" width=\"152\" height=\"152\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:320,&quot;width&quot;:320,&quot;resizeWidth&quot;:152,&quot;bytes&quot;:74009,&quot;alt&quot;:&quot;Author Neo Kim; System design case studies&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:&quot;https://www.threads.net/@systemdesignone&quot;,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Author Neo Kim; System design case studies\" title=\"Author Neo Kim; System design case studies\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\"><strong>Follow me on <a href=\"https://www.linkedin.com/in/nk-systemdesign-one/\">LinkedIn</a> | <a href=\"https://www.threads.net/@systemdesignone\">Threads</a> | <a href=\"https://x.com/systemdesign42\">Twitter</a> | <a href=\"https://www.instagram.com/systemdesignone/\">Instagram</a> | <a href=\"https://bsky.app/profile/systemdesign.one\">Bluesky</a></strong></figcaption></figure></div><div><hr></div><p>Thank you for supporting this newsletter. Consider sharing this post with your friends and get rewards. Y&#8217;all are the best.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://newsletter.systemdesign.one/leaderboard\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png\" width=\"608\" height=\"380\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:500,&quot;width&quot;:800,&quot;resizeWidth&quot;:608,&quot;bytes&quot;:78656,&quot;alt&quot;:&quot;system design newsletter&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:&quot;https://newsletter.systemdesign.one/leaderboard&quot;,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"system design newsletter\" title=\"system design newsletter\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a></figure></div><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/p/how-to-store-passwords-in-database?utm_source=substack&utm_medium=email&utm_content=share&action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/p/how-to-store-passwords-in-database?utm_source=substack&utm_medium=email&utm_content=share&action=share\"><span>Share</span></a></p><div><hr></div><div class=\"digest-post-embed\" data-attrs=\"{&quot;nodeId&quot;:&quot;21eff47a-04eb-4ef1-a76a-be7203c3c222&quot;,&quot;caption&quot;:&quot;Get the powerful template to approach system design for FREE on newsletter sign-up:&quot;,&quot;size&quot;:&quot;sm&quot;,&quot;isEditorNode&quot;:true,&quot;title&quot;:&quot;How Google Ads Was Able to Support 4.77 Billion Users With a SQL Database &#128293;&quot;,&quot;publishedBylines&quot;:[{&quot;id&quot;:135589200,&quot;name&quot;:&quot;Neo Kim&quot;,&quot;bio&quot;:&quot;Writes System Design Newsletter &#8226; I Teach You System Design&quot;,&quot;photo_url&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/c103940f-0d8b-47e7-9a33-013202e17bb8_389x389.jpeg&quot;,&quot;is_guest&quot;:false,&quot;bestseller_tier&quot;:null}],&quot;post_date&quot;:&quot;2024-11-09T13:30:05.071Z&quot;,&quot;cover_image&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/c65080a9-b897-48b0-b638-f3951ae85ebb_1280x720.gif&quot;,&quot;cover_image_alt&quot;:null,&quot;canonical_url&quot;:&quot;https://newsletter.systemdesign.one/p/cloud-spanner-database&quot;,&quot;section_name&quot;:null,&quot;id&quot;:150836306,&quot;type&quot;:&quot;newsletter&quot;,&quot;reaction_count&quot;:128,&quot;comment_count&quot;:12,&quot;publication_name&quot;:&quot;System Design Newsletter&quot;,&quot;publication_logo_url&quot;:&quot;https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc2f21e38-5233-45c3-98b9-abd229da2423_256x256.png&quot;,&quot;belowTheFold&quot;:true}\"></div><div class=\"digest-post-embed\" data-attrs=\"{&quot;nodeId&quot;:&quot;6bb7bbf9-c9c7-41ff-82d0-2cf5b9321032&quot;,&quot;caption&quot;:&quot;Get the powerful template to approach system design for FREE on newsletter sign-up:&quot;,&quot;size&quot;:&quot;sm&quot;,&quot;isEditorNode&quot;:true,&quot;title&quot;:&quot;How Amazon S3 Works &#10024;&quot;,&quot;publishedBylines&quot;:[{&quot;id&quot;:135589200,&quot;name&quot;:&quot;Neo Kim&quot;,&quot;bio&quot;:&quot;Writes System Design Newsletter &#8226; I Teach You System Design&quot;,&quot;photo_url&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/c103940f-0d8b-47e7-9a33-013202e17bb8_389x389.jpeg&quot;,&quot;is_guest&quot;:false,&quot;bestseller_tier&quot;:null}],&quot;post_date&quot;:&quot;2024-10-25T12:28:30.262Z&quot;,&quot;cover_image&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a8ac2dd2-9f0b-4c6b-8c88-8ae6197b5647_1280x720.gif&quot;,&quot;cover_image_alt&quot;:null,&quot;canonical_url&quot;:&quot;https://newsletter.systemdesign.one/p/s3-architecture&quot;,&quot;section_name&quot;:null,&quot;id&quot;:150109909,&quot;type&quot;:&quot;newsletter&quot;,&quot;reaction_count&quot;:168,&quot;comment_count&quot;:6,&quot;publication_name&quot;:&quot;System Design Newsletter&quot;,&quot;publication_logo_url&quot;:&quot;https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc2f21e38-5233-45c3-98b9-abd229da2423_256x256.png&quot;,&quot;belowTheFold&quot;:true}\"></div><div><hr></div><h3>References</h3><ul><li><p><a href=\"https://stackoverflow.com/questions/549/the-definitive-guide-to-form-based-website-authentication\">The definitive guide to form-based website authentication</a></p></li><li><p><a href=\"https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html\">Password Storage Cheat Sheet</a></p></li><li><p><a href=\"https://en.wikipedia.org/wiki/Hash_function\">Hash function</a></p></li><li><p><a href=\"https://en.wikipedia.org/wiki/Salt_(cryptography)\">Salt (cryptography)</a></p></li><li><p><a href=\"https://security.stackexchange.com/questions/17421/how-to-store-salt\">How to store salt?</a></p></li><li><p><a href=\"https://en.wikipedia.org/wiki/Bcrypt\">bcrypt</a></p></li><li><p><a href=\"https://en.wikipedia.org/wiki/Rainbow_table\">Rainbow table</a></p></li><li><p><a href=\"https://en.wikipedia.org/wiki/Key_stretching\">Key stretching</a></p></li><li><p>Block diagrams created with <a href=\"https://app.eraser.io/auth/sign-up?ref=neo\">Eraser</a></p></li></ul>","flags":null,"enclosureUrl":"https://substack-post-media.s3.amazonaws.com/public/images/0e082a6a-cc19-44d9-a90c-d18a5aa28d59_1280x720.gif","enclosureMime":""},{"title":"How Nginx Was Able to Support 1 Million Concurrent Connections on a Single Server âœ¨","url":"https://newsletter.systemdesign.one/p/how-does-nginx-work","date":1733317706,"author":"Neo Kim","unread":true,"desc":"","content":"<p>Get the powerful template to approach system design for FREE on newsletter sign-up:</p><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/subscribe?&quot;,&quot;text&quot;:&quot;Subscribe now&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/subscribe?\"><span>Subscribe now</span></a></p><div><hr></div><p><em>This post outlines Nginx architecture. You will find references at the bottom of this page if you want to go deeper.</em></p><ul><li><p><em><a href=\"https://newsletter.systemdesign.one/p/how-does-nginx-work/?action=share\">Share this post</a> &amp; I'll send you some rewards for the referrals.</em></p></li></ul><p><em>Note: This post is based on my research and may differ from real-world implementation.</em></p><p>Once upon a time, there was a tech startup.</p><p>They offered invoice generation services.</p><p>Yet they had only a few users.</p><p>So they ran their site on a single web server - Apache HTTP.</p><p>Life was good.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif\" width=\"490\" height=\"306.25\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/d3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:500,&quot;width&quot;:800,&quot;resizeWidth&quot;:490,&quot;bytes&quot;:83795,&quot;alt&quot;:&quot;How Does Nginx Work&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/gif&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"How Does Nginx Work\" title=\"How Does Nginx Work\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3b7b30a-4ead-4213-aa97-7d7eb248543c_800x500.gif 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><div class=\"pencraft pc-display-flex pc-gap-8 pc-reset\"><div class=\"pencraft pc-reset icon-container restack-image\"><svg role=\"img\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke-width=\"1.8\" stroke=\"#000\" xmlns=\"http://www.w3.org/2000/svg\"><g><title></title><path d=\"M21 3V8M21 8H16M21 8L18 5.29962C16.7056 4.14183 15.1038 3.38328 13.3879 3.11547C11.6719 2.84766 9.9152 3.08203 8.32951 3.79031C6.74382 4.49858 5.39691 5.65051 4.45125 7.10715C3.5056 8.5638 3.00158 10.2629 3 11.9996M3 21V16M3 16H8M3 16L6 18.7C7.29445 19.8578 8.89623 20.6163 10.6121 20.8841C12.3281 21.152 14.0848 20.9176 15.6705 20.2093C17.2562 19.501 18.6031 18.3491 19.5487 16.8925C20.4944 15.4358 20.9984 13.7367 21 12\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></g></svg></div><div class=\"pencraft pc-reset icon-container view-image\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></div></div></a></figure></div><p>But one day they started to receive massive traffic.</p><p>Yet their server had only limited capacity.</p><p>So they set up more servers.</p><p>Although it temporarily solved their scalability issues, there were newer problems. </p><p>Here are some of them:</p><h4>1. Resource Usage</h4><p>A connection to the web server needs a separate <a href=\"https://stackoverflow.com/questions/200469/what-is-the-difference-between-a-process-and-a-thread\">thread or process</a>.</p><p>Also consumes memory and CPU time until it&#8217;s released.</p><p>So computing resources get wasted.</p><h4>2. Performance</h4><p>A thread must wait until a <em>blocking task</em> is complete.</p><p>Besides context switch increases with many threads.</p><p>Think of the <strong><a href=\"https://en.wikipedia.org/wiki/Context_switch\">context switch</a></strong> as switching a CPU between different threads.</p><p>So performance is bad.</p><p>Onward.</p><div><hr></div><h3><a href=\"https://app.eraser.io/auth/sign-up?utm_campaign=neo\">Eraser - Sponsor</a></h3><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://app.eraser.io/auth/sign-up?utm_campaign=neo\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png\" width=\"1278\" height=\"300\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:300,&quot;width&quot;:1278,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:566950,&quot;alt&quot;:&quot;Eraser AI co-pilot&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:&quot;https://app.eraser.io/auth/sign-up?utm_campaign=neo&quot;,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Eraser AI co-pilot\" title=\"Eraser AI co-pilot\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F82e82808-dc13-4189-baeb-e8c1936af9d7_1278x300.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a></figure></div><p><a href=\"https://www.eraser.io/\">Eraser</a> is an AI co-pilot for technical design that can help your team deliver accurate, consistent designs faster. Create beautiful technical diagrams in seconds from natural language prompts or code prompts (Terraform or SQL).</p><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://app.eraser.io/auth/sign-up?utm_campaign=neo&quot;,&quot;text&quot;:&quot;Sign up for free&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://app.eraser.io/auth/sign-up?utm_campaign=neo\"><span>Sign up for free</span></a></p><div><hr></div><h2>How Does Nginx Work</h2><p>They wanted to reduce costs and ditch the complexity of many servers.</p><p>So they moved to Nginx.</p><p>And here&#8217;s how it offers extreme scalability:</p><h3>1. Parallelism</h3><p>Running many tasks at the same time is called <strong>parallelism</strong>.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png\" width=\"392\" height=\"240.0880195599022\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/d3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:501,&quot;width&quot;:818,&quot;resizeWidth&quot;:392,&quot;bytes&quot;:48300,&quot;alt&quot;:&quot;Master-Worker Model in Nginx&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Master-Worker Model in Nginx\" title=\"Master-Worker Model in Nginx\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd3718afd-092e-48a8-ac24-a662ce0a20d0_818x501.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><div class=\"pencraft pc-display-flex pc-gap-8 pc-reset\"><div class=\"pencraft pc-reset icon-container restack-image\"><svg role=\"img\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke-width=\"1.8\" stroke=\"#000\" xmlns=\"http://www.w3.org/2000/svg\"><g><title></title><path d=\"M21 3V8M21 8H16M21 8L18 5.29962C16.7056 4.14183 15.1038 3.38328 13.3879 3.11547C11.6719 2.84766 9.9152 3.08203 8.32951 3.79031C6.74382 4.49858 5.39691 5.65051 4.45125 7.10715C3.5056 8.5638 3.00158 10.2629 3 11.9996M3 21V16M3 16H8M3 16L6 18.7C7.29445 19.8578 8.89623 20.6163 10.6121 20.8841C12.3281 21.152 14.0848 20.9176 15.6705 20.2093C17.2562 19.501 18.6031 18.3491 19.5487 16.8925C20.4944 15.4358 20.9984 13.7367 21 12\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></g></svg></div><div class=\"pencraft pc-reset icon-container view-image\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></div></div></a><figcaption class=\"image-caption\">Master-Worker Model in Nginx</figcaption></figure></div><p>They built Nginx with the master-worker model:</p><ul><li><p>The master reads the configuration file and creates new workers.</p></li><li><p>While the worker handles client connections.</p></li></ul><p>A simple approach is to give each connection a separate thread or process.</p><p>Yet it will result in context switches, thread trashing, and memory usage.</p><p>Imagine <strong><a href=\"https://www.netdata.cloud/blog/understanding-context-switching-and-its-impact-on-system-performance/#:~:text=Thrashing%20is%20a%20phenomenon%20where,that%20can%20indicate%20its%20presence.\">thread trashing</a></strong> as simply switching between threads instead of doing actual work.</p><p>So they run <em>each worker as a separate process</em>. And assign a separate CPU to each worker. Put simply, the number of workers equals the number of CPUs.</p><p>It gives better performance.</p><p>Ready for the best part?</p><h3>2. Concurrency</h3><p>Managing many tasks at the same time is called <strong>concurrency</strong>. (Yet all tasks don't have to run at the same time.)</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png\" width=\"448\" height=\"145.04554455445543\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:327,&quot;width&quot;:1010,&quot;resizeWidth&quot;:448,&quot;bytes&quot;:39733,&quot;alt&quot;:&quot;A Worker Processing Requests Using the Event Loop&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"A Worker Processing Requests Using the Event Loop\" title=\"A Worker Processing Requests Using the Event Loop\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9a7acaf0-3b4b-4c07-bfdd-c3d1dcb2d196_1010x327.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">A Worker Processing Requests Using the Event Loop</figcaption></figure></div><p>They run the worker as a single-threaded process:</p><ul><li><p>The client sends a request to the worker.</p></li><li><p>The request gets added to its event queue.</p></li><li><p>The worker processes the request using the event loop.</p></li></ul><p>While event loop is asynchronous, event-driven, and non-blocking.</p><p>Think of the <strong><a href=\"https://en.wikipedia.org/wiki/Event_loop\">event loop</a></strong> as the chef in a busy kitchen - they prepare many orders by doing 1 task at a time. And switch between orders when ready.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png\" width=\"490\" height=\"132.914979757085\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/f3069af1-1180-425c-85fc-eb9131078a68_988x268.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:268,&quot;width&quot;:988,&quot;resizeWidth&quot;:490,&quot;bytes&quot;:37486,&quot;alt&quot;:&quot;A Worker Delegating Blocking Tasks to the Thread Pool&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"A Worker Delegating Blocking Tasks to the Thread Pool\" title=\"A Worker Delegating Blocking Tasks to the Thread Pool\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3069af1-1180-425c-85fc-eb9131078a68_988x268.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">A Worker Delegating a Blocking Task to the Thread Pool</figcaption></figure></div><p>A CPU-intensive task will keep the event loop busy. (Also block the worker from accepting new requests.)</p><p>So they <em>offload blocking tasks to the thread pool</em>.</p><p>Think of the <strong><a href=\"https://en.wikipedia.org/wiki/Thread_pool\">thread pool</a></strong> as a group of threads created at Nginx startup. And they're shared between workers.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png\" width=\"524\" height=\"131.53252032520325\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/e685a66c-6133-4aa6-bd76-d35960c476df_984x247.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:247,&quot;width&quot;:984,&quot;resizeWidth&quot;:524,&quot;bytes&quot;:44997,&quot;alt&quot;:&quot;Workflow of Processing a Blocking Request&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Workflow of Processing a Blocking Request\" title=\"Workflow of Processing a Blocking Request\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe685a66c-6133-4aa6-bd76-d35960c476df_984x247.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Workflow of Processing a Blocking Request</figcaption></figure></div><p>Here&#8217;s how it works:</p><ul><li><p>A worker delegates a blocking task to the thread pool.</p></li><li><p>The worker then handles other requests using the event loop.</p></li><li><p>The thread pool tells the worker once the blocking task is complete.</p></li><li><p>The worker responds to the client.</p></li></ul><p>This approach keeps the event loop responsive.</p><p>Ready for the next technique?</p><h3>3. Scalability</h3><p>A simple way to scale is by caching responses.</p><p>Yet it&#8217;s inefficient to cache the same data across different workers.</p><p>So they set up <strong>shared memory</strong>.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png\" width=\"364\" height=\"213.25252525252526\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:464,&quot;width&quot;:792,&quot;resizeWidth&quot;:364,&quot;bytes&quot;:41144,&quot;alt&quot;:&quot;Workers Accessing the Same Data via Shared Memory&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Workers Accessing the Same Data via Shared Memory\" title=\"Workers Accessing the Same Data via Shared Memory\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F48a3de8e-2d59-48de-a0f5-57ec1f2cc03a_792x464.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\">Workers Accessing the Same Data via Shared Memory</figcaption></figure></div><p>It let them:</p><ul><li><p>Share cache data across workers.</p></li><li><p>Store session data and route requests to a specific backend server.</p></li><li><p>Rate limit by tracking requests.</p></li></ul><p>Besides it reduces the memory usage of Nginx.</p><p>While workers use a lock (<strong><a href=\"https://stackoverflow.com/questions/34524/what-is-a-mutex\">mutex</a></strong>) to access shared memory.</p><div><hr></div><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://bsky.app/profile/systemdesign.one/post/3lci5pksggc2e\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png\" width=\"1404\" height=\"892\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:892,&quot;width&quot;:1404,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:152617,&quot;alt&quot;:&quot;Neo Kim Bluesky&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:&quot;https://bsky.app/profile/systemdesign.one/post/3lci5pksggc2e&quot;,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Neo Kim Bluesky\" title=\"Neo Kim Bluesky\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6095f893-e778-4aaf-b0a3-0aa500a4d83d_1404x892.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a></figure></div><p>A single Nginx server can handle 1 million concurrent connections.</p><p>Yet it isn&#8217;t a silver bullet to scalability.</p><p>So choose the right tool for your needs.</p><div><hr></div><p>&#128075; PS - Are you unhappy at your current job?</p><p>And preparing for system design interviews to get your dream job can be stressful.</p><p>Don't worry, I'm working on content to help you pass the system design interview. I'll make it easier - you spend only a few minutes each week to go from 0 to 1. Yet paid subscription fees will be higher than current pledge fees.</p><p>So pledge now to get access at a lower price.</p><p><em>&#8220;This newsletter is an amazing resource for learning system design.&#8221; </em>Alex</p><div><hr></div><p>Subscribe to get simplified case studies delivered straight to your inbox:</p><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/subscribe?&quot;,&quot;text&quot;:&quot;Subscribe now&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/subscribe?\"><span>Subscribe now</span></a></p><div><hr></div><h4>Neo&#8217;s Recommendations</h4><ul><li><p><a href=\"https://newsletter.posthog.com?r=28q5ao\">Product for Engineers</a>: Actionable advice to improve your product skills as a software engineer.</p></li><li><p><a href=\"https://www.developing.dev/?r=28q5ao\">The Developing Dev</a>: Mentorship from a staff engineer at Instagram.</p></li></ul><div><hr></div><div class=\"captioned-image-container\"><figure><a class=\"image-link image2\" target=\"_blank\" href=\"https://www.linkedin.com/in/nk-systemdesign-one/\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png\" width=\"152\" height=\"152\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:320,&quot;width&quot;:320,&quot;resizeWidth&quot;:152,&quot;bytes&quot;:74009,&quot;alt&quot;:&quot;Author Neo Kim; System design case studies&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:&quot;https://www.linkedin.com/in/nk-systemdesign-one/&quot;,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"Author Neo Kim; System design case studies\" title=\"Author Neo Kim; System design case studies\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8f94ab8c-0d67-4775-992e-05e09ab710db_320x320.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div></div></div></a><figcaption class=\"image-caption\"><strong>Follow me on <a href=\"https://www.linkedin.com/in/nk-systemdesign-one/\">LinkedIn</a> | <a href=\"https://www.threads.net/@systemdesignone\">Threads</a> | <a href=\"https://x.com/systemdesign42\">Twitter</a> | <a href=\"https://www.instagram.com/systemdesignone/\">Instagram</a> | <a href=\"https://bsky.app/profile/systemdesign.one\">Bluesky</a></strong></figcaption></figure></div><div><hr></div><p><strong>Want to advertise in this newsletter? </strong>&#128240;</p><p>If your company wants to reach a tech audience, you may want to <a href=\"https://newsletter.systemdesign.one/p/sponsorship\">advertise with me</a>.</p><div><hr></div><p>Thank you for supporting this newsletter.</p><p>You are now 107,871+ readers strong, very close to 108k. Let&#8217;s try to get 108k readers by 7 December. Consider sharing this post with your friends and get rewards.</p><p>Y&#8217;all are the best.</p><div class=\"captioned-image-container\"><figure><a class=\"image-link image2 is-viewable-img\" target=\"_blank\" href=\"https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png\" data-component-name=\"Image2ToDOM\"><div class=\"image2-inset\"><picture><source type=\"image/webp\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1456w\" sizes=\"100vw\"><img src=\"https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png\" width=\"608\" height=\"380\" data-attrs=\"{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:500,&quot;width&quot;:800,&quot;resizeWidth&quot;:608,&quot;bytes&quot;:78656,&quot;alt&quot;:&quot;system design newsletter&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}\" class=\"sizing-normal\" alt=\"system design newsletter\" title=\"system design newsletter\" srcset=\"https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44035943-3bde-4227-bc1a-f29066d4b1ef_800x500.png 1456w\" sizes=\"100vw\" loading=\"lazy\"></picture><div class=\"image-link-expand\"><div class=\"pencraft pc-display-flex pc-gap-8 pc-reset\"><div class=\"pencraft pc-reset icon-container restack-image\"><svg role=\"img\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke-width=\"1.8\" stroke=\"#000\" xmlns=\"http://www.w3.org/2000/svg\"><g><title></title><path d=\"M21 3V8M21 8H16M21 8L18 5.29962C16.7056 4.14183 15.1038 3.38328 13.3879 3.11547C11.6719 2.84766 9.9152 3.08203 8.32951 3.79031C6.74382 4.49858 5.39691 5.65051 4.45125 7.10715C3.5056 8.5638 3.00158 10.2629 3 11.9996M3 21V16M3 16H8M3 16L6 18.7C7.29445 19.8578 8.89623 20.6163 10.6121 20.8841C12.3281 21.152 14.0848 20.9176 15.6705 20.2093C17.2562 19.501 18.6031 18.3491 19.5487 16.8925C20.4944 15.4358 20.9984 13.7367 21 12\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></g></svg></div><div class=\"pencraft pc-reset icon-container view-image\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-maximize2\"><polyline points=\"15 3 21 3 21 9\"></polyline><polyline points=\"9 21 3 21 3 15\"></polyline><line x1=\"21\" x2=\"14\" y1=\"3\" y2=\"10\"></line><line x1=\"3\" x2=\"10\" y1=\"21\" y2=\"14\"></line></svg></div></div></div></div></a></figure></div><p class=\"button-wrapper\" data-attrs=\"{&quot;url&quot;:&quot;https://newsletter.systemdesign.one/p/how-does-nginx-work?utm_source=substack&utm_medium=email&utm_content=share&action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;action&quot;:null,&quot;class&quot;:null}\" data-component-name=\"ButtonCreateButton\"><a class=\"button primary\" href=\"https://newsletter.systemdesign.one/p/how-does-nginx-work?utm_source=substack&utm_medium=email&utm_content=share&action=share\"><span>Share</span></a></p><div><hr></div><h3>References</h3><ul><li><p><a href=\"https://blog.nginx.org/blog/inside-nginx-how-we-designed-for-performance-scale\">Inside NGINX: How We Designed for Performance &amp; Scale</a></p></li><li><p><a href=\"https://www.youtube.com/watch?v=i-8AISuZtN8\">The Powerful &amp; Efficient NGINX Architecture</a></p></li><li><p><a href=\"https://aosabook.org/en/v2/nginx.html\">The Architecture of Open Source Applications (Volume 2) - nginx</a></p></li><li><p><a href=\"https://www.f5.com/company/blog/nginx/thread-pools-boost-performance-9x\">Thread Pools in NGINX Boost Performance 9x!</a></p></li><li><p><a href=\"https://www.f5.com/company/blog/nginx/tuning-nginx\">Tuning NGINX for Performance</a></p></li><li><p><a href=\"https://www.f5.com/company/blog/nginx/socket-sharding-nginx-release-1-9-1\">Socket Sharding in NGINX Release</a></p></li><li><p><a href=\"https://nginx.org/en/docs/control.html\">Controlling nginx</a></p></li><li><p><a href=\"http://www.kegel.com/c10k.html\">The C10K problem</a></p></li><li><p><a href=\"https://blog.cloudflare.com/the-sad-state-of-linux-socket-balancing/\">Why does one NGINX worker take all the load?</a></p></li><li><p><a href=\"https://forum.nginx.org/read.php?2,194884,194884\">Does Nginx block on file IO?</a></p></li><li><p>Block diagrams created with <a href=\"https://app.eraser.io/auth/sign-up?ref=neo\">Eraser</a></p></li></ul>","flags":null,"enclosureUrl":"https://substack-post-media.s3.amazonaws.com/public/images/d034c6d7-c09a-45f6-ba38-12297d63c11c_1280x720.gif","enclosureMime":""}]}